[{"content":"Comments about cri-o.\nA quickstart to deploy cri-o 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 # Load modules cat \u0026lt;\u0026lt;EOF | sudo tee /etc/modules-load.d/crio.conf overlay br_netfilter EOF sudo modprobe overlay sudo modprobe br_netfilter # installation export OS=xUbuntu_20.04 export VERSION=1.21 cat \u0026lt;\u0026lt;EOF | sudo tee /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/$OS/ / EOF cat \u0026lt;\u0026lt;EOF | sudo tee /etc/apt/sources.list.d/devel:kubic:libcontainers:stable:cri-o:$VERSION.list deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/$VERSION/$OS/ / EOF curl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_20.04/Release.key | sudo apt-key add - curl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/1.21/xUbuntu_20.04/Release.key | sudo apt-key add - sudo apt update sudo apt install cri-o cri-o-runc sudo apt install cri-tools -y sudo systemctl enable crio sudo systemctl start crio # test sudo crictl ps sudo crictl images ","date":"2022-09-10T23:03:36-03:00","permalink":"https://edwardspc.github.io/blog/p/cri-o/","title":"CRI-O"},{"content":"Comments about qemu-kvm.\nA script to run kvm-based Ubuntu VMs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 #!/bin/bash HOME=\u0026#34;/opt/public/virtualpc\u0026#34; DIR_TEMPLATES=$HOME/templates IMG_TEMPLATE=\u0026#34;ubuntu-20.04-server-cloudimg-amd64.img\u0026#34; VM_NAME=\u0026#34;master\u0026#34; VM_DIR=$HOME/$VM_NAME mkdir -p $VM_DIR qemu-img create -F qcow2 -b $DIR_TEMPLATES/$IMG_TEMPLATE -f qcow2 $VM_DIR/$VM_NAME.qcow2 10G export MAC_ADDR=$(printf \u0026#39;52:54:00:%02x:%02x:%02x\u0026#39; $((RANDOM%256)) $((RANDOM%256)) $((RANDOM%256))) echo $MAC_ADDR export INTERFACE=eth01 export IP_ADDR=192.168.122.102 cat \u0026gt; $VM_DIR/network-config \u0026lt;\u0026lt;EOF ethernets: $INTERFACE: addresses: - $IP_ADDR/24 dhcp4: false gateway4: 192.168.122.1 match: macaddress: $MAC_ADDR nameservers: addresses: - 1.1.1.1 - 8.8.8.8 set-name: $INTERFACE version: 2 EOF cat \u0026gt; $VM_DIR/user-data \u0026lt;\u0026lt;EOF #cloud-config hostname: $VM_NAME manage_etc_hosts: true users: - name: edward sudo: ALL=(ALL) NOPASSWD:ALL groups: users, admin home: /home/edward shell: /bin/bash lock_passwd: false ssh_pwauth: true disable_root: false chpasswd: list: | edward:changeme expire: false EOF touch $VM_DIR/meta-data cloud-localds -v --network-config=$VM_DIR/network-config $VM_DIR/$VM_NAME-seed.qcow2 $VM_DIR/user-data $VM_DIR/meta-data virt-install \\ --connect qemu:///system \\ --virt-type kvm --name $VM_NAME \\ --ram 2048 \\ --vcpus=2 \\ --os-type linux \\ --os-variant ubuntu20.04 \\ --disk path=$VM_DIR/$VM_NAME.qcow2,device=disk \\ --disk path=$VM_DIR/$VM_NAME-seed.qcow2,device=disk \\ --import --network network=default,model=virtio,mac=$MAC_ADDR References Cloud Images ","date":"2022-09-03T19:14:12-03:00","permalink":"https://edwardspc.github.io/blog/p/qemu/kvm/","title":"QEMU/KVM"},{"content":"To disable ipv6:\nEdit kernel parameters (sysctl) 1 2 3 4 5 6 cat \u0026lt;\u0026lt;EOF | sudo tee /etc/sysctl.conf net.ipv4.ip_forward=1 net.ipv6.conf.all.disable_ipv6=1 net.ipv6.conf.default.disable_ipv6=1 net.ipv6.conf.lo.disable_ipv6=1 EOF Reload 1 sudo sysctl -p ","date":"2022-08-08T06:43:43-03:00","permalink":"https://edwardspc.github.io/blog/p/disable-ipv6/","title":"Disable ipv6"},{"content":"Quickstart to configure ubuntu server\nNetworking 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 cat \u0026lt;\u0026lt;EOF | sudo tee /etc/netplan/00-installer-config.yaml network: version: 2 renderer: networkd ethernets: enp0s3: addresses: - 10.0.2.10/24 dhcp4: false gateway4: 10.0.2.1 match: macaddress: 08:00:27:3d:a5:b7 nameservers: addresses: - 8.8.8.8 - 8.8.4.4 routes: - to: 0.0.0.0/24 via: 10.0.2.1 set-name: enp0s3 EOF Restart network 1 sudo systemctl restart systemd-networkd ","date":"2022-08-08T05:57:11-03:00","permalink":"https://edwardspc.github.io/blog/p/ubuntu-server/","title":"Ubuntu Server"},{"content":"Notes to work with WSL\nTo browse WSL file system: open explorer \\\\wsl$ ","date":"2022-08-01T20:17:52-03:00","permalink":"https://edwardspc.github.io/blog/p/wsl2/","title":"WSL2"}]